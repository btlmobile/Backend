# BTL Mobile Backend Rules

## GENERAL RULES

### 1. NO COMMENTS
- Never add comments in code
- Code must be self-explanatory through clear variable and function names
- Remove all existing comments when modifying code

### 2. NO TEXT ICONS
- No emojis, icons, or special characters in code
- Use only standard ASCII characters
- Variable, function, and class names use only letters, numbers, underscores

### 3. NO MAGIC STRINGS/NUMBERS
- All strings and numbers must be defined in constants
- Use enums for fixed values
- Import constants from `src/constant/` directory
- Examples: SUCCESS, VALIDATION_ERROR, Role.USER

## CODE ORGANIZATION

### 1. Directory Structure
- Follow existing `src/` structure
- bootstrap/ - App initialization
- config/ - Database configuration
- constant/ - Constants, enums, messages
- controller/ - API endpoints
- entity/ - Database models
- helper/ - Utilities
- middleware/ - Custom middlewares
- model/ - Request/Response models
- repository/ - Data access layer
- service/ - Business logic

### 2. Naming Convention
- Files: snake_case
- Classes: PascalCase
- Functions/Variables: snake_case
- Constants: UPPER_CASE
- Enums: PascalCase

### 3. Import Order
1. Standard library imports
2. Third-party imports
3. Local imports (src.*)

## ARCHITECTURE PATTERNS

### 1. Controller Layer
- Use FastAPI routers
- Dependency injection for services
- Return ResultRes format
- Handle status codes based on service responses

### 2. Service Layer
- Return Tuple[str, Optional[dict]]
- Use constants for error codes
- Handle exceptions gracefully
- No throwing exceptions, only return error codes

### 3. Repository Layer
- SQLAlchemy ORM
- Session dependency injection
- CRUD operations
- Entity management

### 4. Entity Layer
- Extend Base from src.config.db_dev
- Include to_dict method
- Proper column definitions

## RESPONSE FORMAT
- Always use ResultRes with isSuccess, errorCode, result, timeStamp
- UTC timestamps
- Consistent error handling

## IMPORTANT NOTES
- Follow existing codebase patterns exactly
- Do not change directory structure
- Use existing constants and enums
- Maintain consistency with current code style
- Test with existing test cases
